
.. DO NOT EDIT.
.. THIS FILE WAS AUTOMATICALLY GENERATED BY SPHINX-GALLERY.
.. TO MAKE CHANGES, EDIT THE SOURCE PYTHON FILE:
.. "auto_examples/mixed/plot_mixed01.py"
.. LINE NUMBERS ARE GIVEN BELOW.

.. only:: html

    .. note::
        :class: sphx-glr-download-link-note

        :ref:`Go to the end <sphx_glr_download_auto_examples_mixed_plot_mixed01.py>`
        to download the full example code

.. rst-class:: sphx-glr-example-title

.. _sphx_glr_auto_examples_mixed_plot_mixed01.py:


======================================================
Braced building frame
======================================================

modeled using a 2D frame element for the main structure and a truss element for the brace


Author: Peter Mackenzie-Helnwein

.. GENERATED FROM PYTHON SOURCE LINES 11-134

.. code-block:: default

    import matplotlib.pyplot as plt
    from femedu.examples.Example import *

    from femedu.domain import *
    from femedu.solver.NewtonRaphsonSolver import *
    from femedu.elements.Truss import *
    from femedu.elements.Frame2D import *
    from femedu.materials.FiberMaterial import *
    from femedu.materials.ElasticSection import *


    class ExampleMixed01(Example):

        def problem(self):
            # initialize a system model

            B = 80.
            H = 50.

            E  = 29000.0   # steel MOE

            A = 20.0       # frame area
            I = 10.0       # frame moment of inertia
            Ab = 1.0       # brace area

            w = 0.50       # uniform load on floor beam

            Ph = 20.00      # additional horizontal load per floor

            # ========== setting global parameters ==============

            target_load_level = 10
            max_steps = 10
            load_levels = np.linspace(0, target_load_level, max_steps)

            # ========= build your structural model =============

            model = System()
            model.setSolver(NewtonRaphsonSolver())

            X10 = Node(0.0, 0.0)
            X11 = Node(0.0, H)

            X20 = Node(B, 0.0)
            X21 = Node(B, H)

            model.addNode(X10,X11)
            model.addNode(X20,X21)

            # columns

            frameParams = {'E': E, 'A': A, 'I': I}
            C11 = Frame2D(X10, X11, ElasticSection(frameParams))
            C21 = Frame2D(X20, X21, ElasticSection(frameParams))
            model.addElement(C11,C21)

            # floors

            params = {'E': E, 'A': A, 'I': 8*I}
            F11 = Frame2D(X11, X21, ElasticSection(params))
            model.addElement(F11)

            # braces

            braceParams = {'E': E, 'A': Ab}
            model += Truss(X10, X21, FiberMaterial(braceParams))

            # fixities
            X10.fixDOF('ux','uy','rz')   # fixed
            X20.fixDOF('ux','uy','rz')   # fixed

            # reference load
            #Pcr = np.pi**2 * EI / L**2
            model.resetLoad()            # size load vector and initialize
            #model.addLoad(Xn, -Pcr, dof=0) # add a horizontal force (first dof only) ; remember C-style indexing: 0,1,...,(n-1)

            # floor loading as distributed loads ...
            F11.setDistLoad(-w)

            # wind load ...
            X11.addLoad([Ph],['ux'])   # horizontal load

            # show model information
            model.report()

            print("\n==== perform the analysis ===\n")

            # * apply the load in multiple smaller load steps

            # set up data recorder
            model.initRecorder()

            # initialize the analysis:
            model.resetDisplacements()   # set U to all zeros
            model.setLoadFactor(0.0)     # define a known equilibrium solution

            model.plot(factor=0.0, title="undeformed system", filename="mixed01_undeformed.png")

            model.startRecorder()

            # solve for all load_levels
            for loadfactor in load_levels:

                # define node X2 as the controled node; downward direction is prescribed:
                model.setLoadFactor(loadfactor)
                model.solve(verbose=True)

                model.recordThisStep()

                print("\n=== next load level ===\n")

            #
            # ==== create some nice plots ===
            #

            model.report()

            model.plot(factor=10.0, filename="mixed01_deformed.png")
            model.beamValuePlot("F", filename="mixed01_force.png")
            model.beamValuePlot("V", filename="mixed01_shear.png")
            model.beamValuePlot("M", filename="mixed01_moment.png")









.. GENERATED FROM PYTHON SOURCE LINES 152-154

Run the example by creating an instance of the problem and executing it by calling :py:meth:`Example.run()`


.. GENERATED FROM PYTHON SOURCE LINES 154-161

.. code-block:: default


    if __name__ == "__main__":
        ex = ExampleMixed01()
        ex.run()






.. rst-class:: sphx-glr-horizontal


    *

      .. image-sg:: /auto_examples/mixed/images/sphx_glr_plot_mixed01_001.png
         :alt: undeformed system
         :srcset: /auto_examples/mixed/images/sphx_glr_plot_mixed01_001.png
         :class: sphx-glr-multi-img

    *

      .. image-sg:: /auto_examples/mixed/images/sphx_glr_plot_mixed01_002.png
         :alt: Deformed System (magnification=10.00)
         :srcset: /auto_examples/mixed/images/sphx_glr_plot_mixed01_002.png
         :class: sphx-glr-multi-img

    *

      .. image-sg:: /auto_examples/mixed/images/sphx_glr_plot_mixed01_003.png
         :alt: Axial Forces
         :srcset: /auto_examples/mixed/images/sphx_glr_plot_mixed01_003.png
         :class: sphx-glr-multi-img

    *

      .. image-sg:: /auto_examples/mixed/images/sphx_glr_plot_mixed01_004.png
         :alt: Shear Forces
         :srcset: /auto_examples/mixed/images/sphx_glr_plot_mixed01_004.png
         :class: sphx-glr-multi-img

    *

      .. image-sg:: /auto_examples/mixed/images/sphx_glr_plot_mixed01_005.png
         :alt: Bending Moment
         :srcset: /auto_examples/mixed/images/sphx_glr_plot_mixed01_005.png
         :class: sphx-glr-multi-img


.. rst-class:: sphx-glr-script-out

 .. code-block:: none


    System Analysis Report
    =======================

    Nodes:
    ---------------------
      Node_0:
          x:    [0. 0.]
          fix:  ['ux', 'uy', 'rz']
          u:    None
      Node_1:
          x:    [ 0. 50.]
          P:    [20.  0.  0.]
          u:    None
      Node_2:
          x:    [80.  0.]
          fix:  ['ux', 'uy', 'rz']
          u:    None
      Node_3:
          x:    [80. 50.]
          u:    None

    Elements:
    ---------------------
      Frame2D_0: nodes ( Node_0 Node_1 )
          material: ElasticSection
          internal forces: f0=0.00 V0=0.00 M0=0.00 fl=0.00 Vl=0.00 Ml=0.00 Pw=0.00 Mw=0.00
      Frame2D_1: nodes ( Node_2 Node_3 )
          material: ElasticSection
          internal forces: f0=0.00 V0=0.00 M0=0.00 fl=0.00 Vl=0.00 Ml=0.00 Pw=0.00 Mw=0.00
      Frame2D_2: nodes ( Node_1 Node_3 )
          material: ElasticSection
          internal forces: f0=0.00 V0=0.00 M0=0.00 fl=0.00 Vl=0.00 Ml=0.00 Pw=0.00 Mw=0.00
      Truss: Node_0 to Node_3:
          material properties: FiberMaterial(Material)({'E': 29000.0, 'A': 1.0, 'nu': 0.0, 'fy': 1e+30})  strain:0.0   stress:{'xx': 0.0, 'yy': 0.0, 'zz': 0.0, 'xy': 0.0}  
          internal force: 0.0


    ==== perform the analysis ===

    norm of the out-of-balance force:   0.0000e+00
    +

    === next load level ===

    norm of the out-of-balance force:   4.2079e+02
    norm of the out-of-balance force:   2.6166e+00
    norm of the out-of-balance force:   3.7928e-03
    norm of the out-of-balance force:   7.4666e-07
    +

    === next load level ===

    norm of the out-of-balance force:   4.2079e+02
    norm of the out-of-balance force:   5.2946e+00
    norm of the out-of-balance force:   1.5499e-02
    norm of the out-of-balance force:   6.3093e-06
    norm of the out-of-balance force:   2.4070e-08
    +

    === next load level ===

    norm of the out-of-balance force:   4.2079e+02
    norm of the out-of-balance force:   8.0364e+00
    norm of the out-of-balance force:   3.5633e-02
    norm of the out-of-balance force:   2.2517e-05
    norm of the out-of-balance force:   1.2596e-07
    +

    === next load level ===

    norm of the out-of-balance force:   4.2079e+02
    norm of the out-of-balance force:   1.0844e+01
    norm of the out-of-balance force:   6.4746e-02
    norm of the out-of-balance force:   5.6502e-05
    norm of the out-of-balance force:   4.1168e-07
    +

    === next load level ===

    norm of the out-of-balance force:   4.2079e+02
    norm of the out-of-balance force:   1.3721e+01
    norm of the out-of-balance force:   1.0343e-01
    norm of the out-of-balance force:   1.1694e-04
    norm of the out-of-balance force:   1.0397e-06
    norm of the out-of-balance force:   6.6361e-09
    +

    === next load level ===

    norm of the out-of-balance force:   4.2079e+02
    norm of the out-of-balance force:   1.6668e+01
    norm of the out-of-balance force:   1.5230e-01
    norm of the out-of-balance force:   2.1431e-04
    norm of the out-of-balance force:   2.2310e-06
    norm of the out-of-balance force:   1.7561e-08
    +

    === next load level ===

    norm of the out-of-balance force:   4.2079e+02
    norm of the out-of-balance force:   1.9690e+01
    norm of the out-of-balance force:   2.1203e-01
    norm of the out-of-balance force:   3.6123e-04
    norm of the out-of-balance force:   4.2790e-06
    norm of the out-of-balance force:   4.0324e-08
    +

    === next load level ===

    norm of the out-of-balance force:   4.2079e+02
    norm of the out-of-balance force:   2.2788e+01
    norm of the out-of-balance force:   2.8335e-01
    norm of the out-of-balance force:   5.7278e-04
    norm of the out-of-balance force:   7.5603e-06
    norm of the out-of-balance force:   8.3499e-08
    +

    === next load level ===

    norm of the out-of-balance force:   4.2079e+02
    norm of the out-of-balance force:   2.5966e+01
    norm of the out-of-balance force:   3.6701e-01
    norm of the out-of-balance force:   8.6689e-04
    norm of the out-of-balance force:   1.2548e-05
    norm of the out-of-balance force:   1.5984e-07
    +

    === next load level ===


    System Analysis Report
    =======================

    Nodes:
    ---------------------
      Node_0:
          x:    [0. 0.]
          fix:  ['ux', 'uy', 'rz']
          u:    [0. 0. 0.]
      Node_1:
          x:    [ 0. 50.]
          P:    [20.  0.  0.]
          u:    [ 0.81266732 -0.01624899 -0.03775534]
      Node_2:
          x:    [80.  0.]
          fix:  ['ux', 'uy', 'rz']
          u:    [0. 0. 0.]
      Node_3:
          x:    [80. 50.]
          u:    [ 0.78416849 -0.02726845  0.03214935]

    Elements:
    ---------------------
      Frame2D_0: nodes ( Node_0 Node_1 )
          material: ElasticSection
          internal forces: f0=-188.49 V0=-6.62 M0=-99.67 fl=-188.49 Vl=-6.62 Ml=-277.32 Pw=0.00 Mw=0.00
      Frame2D_1: nodes ( Node_2 Node_3 )
          material: ElasticSection
          internal forces: f0=-316.31 V0=37.20 M0=-911.91 fl=-316.31 Vl=37.20 Ml=1195.98 Pw=0.00 Mw=0.00
      Frame2D_2: nodes ( Node_1 Node_3 )
          material: ElasticSection
          internal forces: f0=-206.62 V0=-11.51 M0=2389.35 fl=-206.62 Vl=-11.51 Ml=1470.69 Pw=-200.00 Mw=-2666.67
      Truss: Node_0 to Node_3:
          material properties: FiberMaterial(Material)({'E': 29000.0, 'A': 1.0, 'nu': 0.0, 'fy': 1e+30})  strain:0.006869475390917045   stress:{'xx': 199.2147863365943, 'yy': 0.0, 'zz': 0.0, 'xy': 0.0}  
          internal force: 199.2147863365943






.. rst-class:: sphx-glr-timing

   **Total running time of the script:** ( 0 minutes  0.870 seconds)


.. _sphx_glr_download_auto_examples_mixed_plot_mixed01.py:

.. only:: html

  .. container:: sphx-glr-footer sphx-glr-footer-example




    .. container:: sphx-glr-download sphx-glr-download-python

      :download:`Download Python source code: plot_mixed01.py <plot_mixed01.py>`

    .. container:: sphx-glr-download sphx-glr-download-jupyter

      :download:`Download Jupyter notebook: plot_mixed01.ipynb <plot_mixed01.ipynb>`


.. only:: html

 .. rst-class:: sphx-glr-signature

    `Gallery generated by Sphinx-Gallery <https://sphinx-gallery.github.io>`_
